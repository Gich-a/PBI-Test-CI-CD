      - name: Power BI Deployment Pipeline
        run: |
          sudo apt-get install -y powershell
          pwsh -Command "Install-Module -Name FabricPS -Scope CurrentUser -Force"

      - name: Deploy PBIP to DEV Workspace
        env:
          TENANT_ID: ${{ secrets.PBI_TENANT_ID }}
          CLIENT_ID: ${{ secrets.PBI_CLIENT_ID }}
          CLIENT_SECRET: ${{ secrets.PBI_CLIENT_SECRET }}
          WORKSPACE_ID: ${{ secrets.PBI_WORKSPACE_ID_DEV }}
        run: |
          pwsh -Command "
            Import-Module FabricPS
            $secPassword = ConvertTo-SecureString '${{ env.CLIENT_SECRET }}' -AsPlainText -Force
            $credentials = New-Object System.Management.Automation.PSCredential('${{ env.CLIENT_ID }}', $secPassword)
            Connect-FabricTenant -TenantId '${{ env.TENANT_ID }}' -Credential $credentials

            Write-Host 'üìÅ Deploying PBIP folder to workspace...'
            Publish-FabricArtifact -Path './powerbi/AdventureWorks Report Main.pbip' -WorkspaceId '${{ env.WORKSPACE_ID }}' -Overwrite
          "
